<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta charset="UTF-8"/>
    <title>Lejeaftaler</title>
    <link rel="stylesheet" href="/stylesheet.css"/> <!-- S칮rg for stien er korrekt -->
    <!-- Font links -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"
          rel="stylesheet"
    />
<body>

<!-- 游땎 Updateret -->
<div th:replace="~{fragments/header :: header('dataRegistration')}"></div>

<div class="container">
    <div class="header-flex">
        <h1>Lejeaftale Oversigt</h1>
    </div>

    <p class="description-text">
        P친 denne side kan du se oversigten over vores lejeaftaler, tilf칮je lejeaftaler,
        redigere deres info & status eller helt slette dem.
    </p>

    <div class="action-section">
        <div class="create-car-section">

            <!-- 游땎 OPDATERET - RentalAgreementController's createRentalAgreement mapping -->
            <button type="button" class="btn-opret"
                    th:onclick="|location.href='@{/dataRegistration/rental-agreements/create}'|">
                Opret lejeaftale
            </button>
            <p>Klik her for at oprette ny lejeaftale</p>
        </div>

        <!-- 游땨 M칀SKE virker den - Er stadig bilens logik -->
        <div class="search-id-container">
            <div class="search-id-section">
                <form class="search-id-section" th:action="@{/dataRegistration/rental-agreements/{id}}" method="get">

                    <input type="text" id="searchAgreementId"
                           name="searchRentalAgreementId" placeholder="Indtast lejeaftalens ID nummer"
                           th:value="${param.searchRentalAgreementId}"/>
                    <button type="submit" class="btn-soeg">S칮g</button>
                </form>
            </div>
            <p>Find en lejeaftale med dens ID nummer</p>
        </div>

    </div>


  <!-- 游땨 IKKE OPDATERET Filter Formular peger nu p친 FleetController -->
  <form class="filter-section" th:action="@{/dataRegistration/rentalAgreements}" method="get">
    <!-- Brand Filter -->
    <div class="filter-group">
      <select id="brandFilter" name="brand">
        <option value="">Brand</option>
        <option th:each="brandObj : ${availableBrands}"
                th:value="${brandObj.brandId}"
                th:text="${brandObj.brandName}"
                th:selected="${brandObj.brandId} == ${param.brand}">
        </option>
      </select>
    </div>

    <!-- Model Filter -->
    <div class="filter-group">
      <select id="modelFilter" name="model">
        <option value="">Model</option>
        <option th:each="modelObj : ${availableModels}"
                th:value="${modelObj.modelId}"
                th:text="${modelObj.modelName}"
                th:selected="${modelObj.modelId} == ${param.model}">
        </option>
      </select>
    </div>

    <!-- Fuel Type Filter -->
    <div class="filter-group">
      <select id="fuelTypeFilter" name="fuelType">
        <option value="">Fuel Type</option>
        <option th:each="fuel : ${availableFuelTypes}"
                th:value="${fuel.fuelTypeId}"
                th:text="${fuel.fuelTypeName}"
                th:selected="${fuel.fuelTypeId} == ${param.fuelType}">
        </option>
      </select>
    </div>

    <!-- Transmission Type Filter -->
    <div class="filter-group">
      <select id="transmissionTypeFilter" name="transmissionType">
        <option value="">Transmission Type</option>
        <option th:each="trans : ${availableTransmissionTypes}"
                th:value="${trans.transmissionTypeId}"
                th:text="${trans.transmissionTypeName}"
                th:selected="${trans.transmissionTypeId} == ${param.transmissionType}">
        </option>
      </select>
    </div>

    <!-- Status Filter (bruger CarStatus DTO direkte) -->
    <div class="filter-group">
      <select id="statusFilter" name="status">
        <option value="">Status</option>
        <option th:each="stat : ${availableStatuses}"
                th:value="${stat.carStatusId}"
                th:text="${stat.statusName}"
                th:selected="${stat.carStatusId} == ${param.status}">
        </option>
      </select>
    </div>

    <div class="filter-button-group">
      <button type="submit" class="btn-soeg-filter">S칮g</button>
      <!-- Vis Alle peger nu p친 FleetController -->
      <a th:href="@{/fleet/overview}" class="btn btn-vis-alle">Vis Alle</a>
    </div>
  </form>


    <table class="car-table">
        <thead>
        <th>ID</th>
        <th>Bil</th>
        <th>Kunde</th>
        <th>Start dato</th>
        <th>Slut dato</th>
        <th>M친neds Pris</th>
        <th>Inkl. km</th>
        <th>Handlinger</th>
        </thead>

      <tbody>
      <tr th:if="${#lists.isEmpty(agreements)}">
        <td colspan="8" style="text-align: center">Ingen lejeaftaler fundet</td>
      </tr>

      <tr th:unless="${#lists.isEmpty(agreements)}" th:each="agreement : ${agreements}">
        <td th:text="${agreement.rentalAgreementId}">0</td>
        <td th:text="${agreement.carId}">N/A</td>
        <td th:text="${agreement.customerId}">N/A</td>
        <td th:text="${agreement.startDate}">N/A</td>
        <td th:text="${agreement.endDate}">N/A</td>
        <td th:text="${agreement.monthlyPrice}">N/A</td>
        <td th:text="${agreement.kilometersIncluded}">N/A</td>
        <td>

          <!-- Detaljer -->


          <button type="button" class="btn-detaljer"
                  th:onclick="|location.href='@{/dataRegistration/rental-agreements/{id}(id=${agreement.rentalAgreementId})}'|">
            Detaljer
          </button>

          <!-- Rediger -->
          <button type="button" class="btn-detaljer"
                  th:onclick="|location.href='@{/dataRegistration/rental-agreements/edit/{id}(id=${agreement.rentalAgreementId})}'|">
            Rediger
          </button>

        </td>
      </tr>
      </tbody>

    </table>


</div>
</body>
</html>