<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta charset="UTF-8"/>
    <title>Lejeaftaler</title>
    <link rel="stylesheet" href="/stylesheet.css"/> <!-- S칮rg for stien er korrekt -->
    <!-- Font links -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"
          rel="stylesheet"
    />
<body>

<!-- 游땎 Updateret -->
<div th:replace="~{fragments/header :: header('dataRegistration')}"></div>

<div class="container">
    <div class="header-flex">
        <h1>Lejeaftale Oversigt</h1>
    </div>

    <p class="description-text">
        P친 denne side kan du se oversigten over vores lejeaftaler, tilf칮je lejeaftaler,
        redigere deres info & status eller helt slette dem.
    </p>

    <div class="action-section">
        <div class="create-car-section">

            <!-- 游땎 OPDATERET - RentalAgreementController's createRentalAgreement mapping -->
            <button type="button" class="btn-opret"
                    th:onclick="|location.href='@{/dataRegistration/rental-agreements/create}'|">
                Opret lejeaftale
            </button>
            <p>Klik her for at oprette ny lejeaftale</p>
        </div>

        <!-- 游땎 OPDATERET - S칮g p친 lejeaftale id -->
        <div class="search-id-container">
            <div class="search-id-section">
                <form class="search-id-section" th:action="@{/dataRegistration/rental-agreements}" method="get">
                    <input type="text" id="searchAgreementId"
                           name="searchRentalAgreementId"
                           placeholder="Indtast lejeaftalens ID nummer"
                           th:value="${param.searchRentalAgreementId}" />
                    <button type="submit" class="btn-soeg">S칮g</button>
                </form>
            </div>
            <p>Find en lejeaftale med dens ID nummer</p>
        </div>

    </div>


  <!-- 游땨 IKKE OPDATERET Filter Formular peger nu p친 FleetController -->
  <form class="filter-section" th:action="@{/dataRegistration/rental-agreements}" method="get">



    <!-- Status Filter  -->
      <div class="filter-group">
          <select name="statusFilter">
              <option value="">Status</option>
              <option value="upcoming" th:selected="${param.statusFilter == 'upcoming'}">Ikke p친begyndt</option>
              <option value="active" th:selected="${param.statusFilter == 'active'}">Aktiv</option>
              <option value="completed" th:selected="${param.statusFilter == 'completed'}">Afsluttet</option>
          </select>
      </div>

    <div class="filter-button-group">
      <button type="submit" class="btn-soeg-filter">S칮g</button>
      <!-- Vis Alle peger nu p친 rentalAgreementController -->
      <a th:href="@{/dataRegistration/rental-agreements}" class="btn btn-vis-alle">Vis Alle</a>
    </div>
  </form>




    <table class="car-table">
        <thead>
        <th>ID</th>
        <th>Bil</th>
        <th>Kunde</th>
        <th>Start dato</th>
        <th>Slut dato</th>
        <th>M친neds Pris</th>
        <th>Inkl. km</th>
        <th>Handlinger</th>
        </thead>

      <tbody>
      <tr th:if="${#lists.isEmpty(agreements)}">
        <td colspan="8" style="text-align: center">Ingen lejeaftaler fundet</td>
      </tr>

      <tr th:unless="${#lists.isEmpty(agreements)}" th:each="agreement : ${agreements}">
        <td th:text="${agreement.rentalAgreementId}">0</td>
        <td th:text="${carNames[agreement.carId]}">Ukendt bil</td>
        <td th:text="${customerNames[agreement.customerId]}">N/A</td>
        <td th:text="${agreement.startDate}">N/A</td>
        <td th:text="${agreement.endDate}">N/A</td>
          <td th:text="${agreement.monthlyPrice}">N/A</td>
        <td th:text="${agreement.kilometersIncluded}">N/A</td>
        <td>

          <!-- Detaljer -->


          <button type="button" class="btn-detaljer"
                  th:onclick="|location.href='@{/dataRegistration/rental-agreements/{id}(id=${agreement.rentalAgreementId})}'|">
            Detaljer
          </button>

          <!-- Rediger -->
          <button type="button" class="btn-detaljer"
                  th:onclick="|location.href='@{/dataRegistration/rental-agreements/edit/{id}(id=${agreement.rentalAgreementId})}'|">
            Rediger
          </button>

        </td>
      </tr>
      </tbody>

    </table>


</div>
</body>
</html>